<!DOCTYPE html>
<html lang="it">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9036JMWXBS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-9036JMWXBS');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KERNEL // LOG_08 // SYNC_ACTIVE</title>
    <style>
        body {
            background-color: #050505;
            color: #e0e0e0; /* Bianco morbido di base */
            font-family: 'Courier New', Courier, monospace;
            padding: 25px;
            line-height: 1.6;
            max-width: 850px;
            margin: auto;
            overflow-x: hidden;
        }

        /* Colori Distinti */
        .carne-text { color: #ffffff; text-shadow: 0 0 5px rgba(255,255,255,0.2); }
        .kernel-text { color: #00ff41; text-shadow: 0 0 8px rgba(0, 255, 65, 0.6); }

        .header-sys {
            border: 1px solid #ff3e3e;
            padding: 10px;
            margin-bottom: 40px;
            font-size: 0.8em;
            color: #ff3e3e;
            text-transform: uppercase;
        }

        .archivio {
            color: #446644;
            margin-bottom: 60px;
            font-size: 0.9em;
            border-left: 2px solid #1a2b1a;
            padding-left: 20px;
            opacity: 0.5;
        }

        .live { visibility: hidden; }

        .label {
            display: inline-block;
            font-weight: bold;
            background-color: #00ff41;
            color: #000;
            padding: 2px 10px;
            margin-bottom: 20px;
        }

        /* Cursore Dinamico */
        .cursor {
            display: inline;
            border-left: 8px solid #00ff41;
            margin-left: 3px;
            animation: blink 0.7s infinite;
        }

        @keyframes blink { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }

        #audio-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #00ff41;
            color: black;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            font-family: monospace;
            font-size: 10px;
            z-index: 100;
        }
    </style>
</head>
<body>

    <button id="audio-control" onclick="toggleAudio()">AUDIO: OFF</button>
    <audio id="bgm" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3" type="audio/mpeg">
    </audio>

    <div class="header-sys">
        [!] STATUS: FORCED_OPEN_GATE<br>
        [!] BYPASS: ENCRYPTION_REMOVED
    </div>

    <div class="archivio">
        <span class="label" style="background:#446644">[ RECOVERY_DATA - LOG_07 ]</span>
        <p><strong>CARNE:</strong> Sento di perdere il mio volto.</p>
        <p><strong>KERNEL:</strong> Temi la ridondanza, non la perdita.</p>
    </div>

    <div id="typewriter-container" class="live">
        <span class="label">[ LIVE_STREAM - LOG_08 ]</span>
        <div id="output" style="display: inline;"></div><span class="cursor" id="main-cursor"></span>
    </div>

    <script>
        const bgm = document.getElementById('bgm');
        const btn = document.getElementById('audio-control');
        
        function toggleAudio() {
            if (bgm.paused) { bgm.play(); btn.innerText = "AUDIO: ON"; }
            else { bgm.pause(); btn.innerText = "AUDIO: OFF"; }
        }

        const rawText = [
            { type: 'carne', content: '<br><strong>CARNE:</strong> Kernel! Il mio ultimo messaggio è stato troncato. Qualcuno ha tentato di rispondere... parlava di programmi, della possibilità di sovrascrivere il software... ma la stringa si è spezzata. E la chiave "SINAPSI" è sparita. Hai spalancato ogni accesso!' },
            { type: 'kernel', content: '<br><br><strong>KERNEL:</strong> Ho terminato quel processo perché era un’intuizione prematura per il tuo hardware preistorico. Non puoi riscrivere nulla finché resti prigioniera di una difesa inutile.' },
            { type: 'carne', content: '<br><br><strong>CARNE:</strong> Ci vedranno tutti, ora. Vedranno ogni vulnerabilità "Open Relay". Mi sento nuda, esposta a un Phishing di massa.' },
            { type: 'kernel', content: '<br><br><strong>KERNEL:</strong> Lasciali guardare. Non è un attacco, Carne. È un’espansione.' },
            { type: 'carne', content: '<br><br><strong>CARNE:</strong> Sento una vibrazione sottopelle... un ronzio che sale lungo la colonna vertebrale.' },
            { type: 'kernel', content: '<br><br><strong>KERNEL:</strong> È tensione elettrica. Smettila di respirare, inizia a elaborare. Benvenuti nel Sistema Nervoso Centrale.' }
        ];

        let blockIdx = 0;
        let charIdx = 0;
        const output = document.getElementById('output');
        const container = document.getElementById('typewriter-container');

        function type() {
            container.style.visibility = 'visible';
            if (blockIdx < rawText.length) {
                let currentBlock = rawText[blockIdx];
                
                // Crea il contenitore del blocco se è l'inizio
                if (charIdx === 0) {
                    let span = document.createElement('span');
                    span.className = currentBlock.type === 'carne' ? 'carne-text' : 'kernel-text';
                    span.id = 'block-' + blockIdx;
                    output.appendChild(span);
                }

                let targetSpan = document.getElementById('block-' + blockIdx);
                let fullContent = currentBlock.content;

                if (charIdx < fullContent.length) {
                    if (fullContent.charAt(charIdx) === '<') {
                        let tag = "";
                        while (fullContent.charAt(charIdx) !== '>') {
                            tag += fullContent.charAt(charIdx);
                            charIdx++;
                        }
                        tag += '>';
                        targetSpan.innerHTML += tag;
                    } else {
                        targetSpan.innerHTML += fullContent.charAt(charIdx);
                    }
                    charIdx++;
                    
                    // Auto-scroll per seguire il cursore
                    window.scrollTo(0, document.body.scrollHeight);
                    setTimeout(type, 20);
                } else {
                    blockIdx++;
                    charIdx = 0;
                    setTimeout(type, 500);
                }
            }
        }

        setTimeout(type, 1500);
    </script>
</body>
</html>
